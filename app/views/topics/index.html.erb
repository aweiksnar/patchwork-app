<div class="container">
  <h1>Topics</h1>
  <%= notice %>
  <p><%= link_to 'Add a New Topic', new_topic_url %></p>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Topic title</th>
        <th>Category</th>

        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
    <% @topics.each do |topic| %>
      <tr>
        <td><%= link_to topic.title, topic_url(topic) %>

        <% if (topic.user_id == session[:user_id] && session[:user_id].present?) || User.find_by_id(session[:user_id]).present? && User.find_by_id(session[:user_id]).admin == true %>
          <span class="details">( <%= link_to 'Edit', edit_topic_url(topic) %> | <%= link_to 'Destroy', topic_url(topic), method: 'delete', data: { confirm: "Do you really want to delete this topic?" } %> )</span></td>
        <% end %>
        <td><%= topic.category.title %></td>
        <td></td>
        <td></td>

      </tr>
    <% end %>
    </tbody>
  </table>

</div>
