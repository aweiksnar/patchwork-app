<h1><%= @topic.title %></h1>

<p>
  <%= link_to @topic.category.title, category_url(@topic.category.id) %> > <%= @topic.title %>
</p>

<h2>Subtopics</h2>
<% @topic.subtopics.each do |subtopic| %>
  <ul>
    <li><%= link_to subtopic.title,
            subtopic_url(subtopic) %></li>
    <ul>
      <% subtopic.articles.each do |article| %>

        <li><%= article.title %></li>

      <% end %>

    </ul>
  </ul>

<% end %>

<h4>Beginner Articles</h4>
<% @topic.subtopics.each do |subtopic| %>

      <% subtopic.articles.where(:level => 1).each do |article| %>

        <li><%= article.title %></li>



      <% end %>
<% end %>

<h4>Intermediate Articles</h4>
<% @topic.subtopics.each do |subtopic| %>

      <% subtopic.articles.where(:level => 2).each do |article| %>

        <li><%= article.title %></li>



      <% end %>
<% end %>

<h4>Advanced Articles</h4>
<% @topic.subtopics.each do |subtopic| %>

      <% subtopic.articles.where(:level => 3).each do |article| %>

        <li><%= article.title %></li>



      <% end %>
<% end %>



<h3>Add a New Sub-Topic to <%= @topic.title %></h3>
<%= form_tag subtopics_url do %>
  <%= label_tag :title, "Title" %>
  <%= text_field_tag :title  %>
  <%= hidden_field_tag :topic_id, @topic.id %>
  <%= submit_tag "Add" %>
<% end %>

